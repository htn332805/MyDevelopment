# orchestrator/recipes/example_number.yaml

# Define the version of the orchestrator DSL being used
tosca_definitions_version: orchestrator_dsl_1_3

# A brief description of the blueprint's purpose
description: >
  This blueprint demonstrates a simple orchestration workflow
  that includes tasks for initializing a number, performing
  arithmetic operations, and outputting the result.

# Imports necessary plugins or modules for the orchestration
imports:
  - plugin: orchestrator-math-plugin

# Define the inputs required for the orchestration
inputs:
  initial_value:
    type: integer
    description: The starting number for the operations
    default: 5

# Define the outputs that the orchestration will produce
outputs:
  final_result:
    description: The result after performing arithmetic operations

# Define the tasks that make up the orchestration workflow
tasks:
  # Task to initialize the number
  initialize_number:
    description: "Initialize the number with the provided input value"
    implementation:
      plugin: orchestrator-math-plugin
      action: initialize
    inputs:
      value: { get_input: initial_value }

  # Task to add 10 to the number
  add_ten:
    description: "Add 10 to the initialized number"
    implementation:
      plugin: orchestrator-math-plugin
      action: add
    inputs:
      value: 10
    dependencies:
      - initialize_number

  # Task to multiply the number by 2
  multiply_by_two:
    description: "Multiply the result by 2"
    implementation:
      plugin: orchestrator-math-plugin
      action: multiply
    inputs:
      value: 2
    dependencies:
      - add_ten

  # Task to subtract 5 from the number
  subtract_five:
    description: "Subtract 5 from the current result"
    implementation:
      plugin: orchestrator-math-plugin
      action: subtract
    inputs:
      value: 5
    dependencies:
      - multiply_by_two

  # Task to output the final result
  output_result:
    description: "Output the final result after all operations"
    implementation:
      plugin: orchestrator-math-plugin
      action: output
    inputs:
      value: { get_attribute: [subtract_five, result] }
    dependencies:
      - subtract_five
